# Ralph Loop 配置说明

## 文件说明

### PROMPT.md
**用途**: Ralph Loop 迭代提示词主文档

每次 Ralph Loop 迭代时都会读取这个文件的内容作为提示词。包含：
- 项目背景和当前状态
- 具体的迭代任务
- 技术约束和规范
- 完成标准
- 成功信号 `<promise>...`

**更新时机**: 当迭代目标变更或需要调整方向时

### RALPH_LOOP_GUIDE.md
**用途**: Ralph Loop 快速使用指南

包含：
- 快速开始命令
- 当前迭代任务概览
- 最佳实践建议
- 常用命令参考

**更新时机**: 发现使用问题或需要补充指导时

## 当前配置

### 迭代任务
**Phase 2.2: 学习管理系统开发**

核心功能：
1. 学习记录 API
2. 苏格拉底式引导教学
3. 错题本功能
4. 知识点图谱

### 完成信号
```
<promise>Phase 2.2 学习管理系统核心功能完成：学习记录API、苏格拉底引导教学、错题本功能、知识点图谱均已实现并通过测试，所有API端点响应正常，测试覆盖率>80%，与现有认证系统集成验证通过。</promise>
```

## 使用流程

### 1. 启动迭代
```bash
/ralph-loop "继续 Phase 2.2 学习管理系统开发"
```

### 2. 迭代开发
- Claude 会读取 PROMPT.md
- 查看现有代码和测试
- 实现一个功能点
- 编写/更新测试
- 验证功能
- 尝试退出

### 3. 自动循环
- Stop hook 拦截退出
- 再次提供相同的 PROMPT.md
- Claude 看到之前的修改
- 继续迭代改进

### 4. 完成检测
- Claude 输出 `<promise>...</promise>`
- Stop hook 检测到完成信号
- 循环自动停止

### 5. 手动停止（可选）
```bash
/cancel-ralph
```

## 最佳实践

### PROMPT.md 编写原则

1. **明确具体** - 清晰定义任务目标和范围
2. **可衡量** - 提供明确的完成标准
3. **有约束** - 列出技术规范和质量要求
4. **可迭代** - 任务可以分步骤完成
5. **包含成功信号** - 明确的 `<promise>` 标签

### 迭代建议

1. **小步快跑** - 每次迭代只做一件事
2. **保持测试通过** - 不要破坏现有功能
3. **及时提交** - 每个改进点都提交代码
4. **记录决策** - 在代码或文档中记录重要决策
5. **遇到阻塞立即提出** - 不要陷入困境

### 常见问题

**Q: 循环不停止怎么办？**
A: 检查 PROMPT.md 中的 `<promise>` 标签是否正确，或使用 `--max-iterations` 限制最大迭代次数。

**Q: 如何查看迭代进度？**
A: 使用 `tm list` 查看任务状态，查看 git 历史了解代码变更。

**Q: 迭代中遇到错误怎么办？**
A: 记录错误信息，在下一次迭代中修复，或手动停止循环处理问题。

## 配置文件位置

```
项目根目录/
├── PROMPT.md                    # Ralph Loop 提示词（主文档）
├── RALPH_LOOP_GUIDE.md          # 使用指南
├── RALPH_LOOP_SETUP.md           # 本文件（配置说明）
└── .claude/
    └── ralph-loop.local.md       # 循环状态文件（自动生成）
```

## 参考资源

- **Ralph Loop 原理**: https://ghuntley.com/ralph/
- **Ralph Orchestrator**: https://github.com/mikeyobrien/ralph-orchestrator
- **项目计划**: tasks.md
- **技术文档**: docs/
