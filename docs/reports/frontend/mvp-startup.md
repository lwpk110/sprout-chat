# 小芽家教前端 MVP - 快速启动指南

## 当前状态

✅ **前端已完整实现**，包含以下核心功能：

### 已实现功能

1. **语音对话界面** (`VoiceInteraction.tsx`)
   - 大麦克风按钮（128px x 128px）
   - 实时语音识别（Web Speech API）
   - 语音转文字显示
   - 录音状态动画（脉冲光晕）

2. **拍照上传界面** (`PhotoInteraction.tsx`)
   - 大相机按钮（128px x 128px）
   - 图片预览功能
   - 上传/重拍按钮
   - 使用提示

3. **引导式教学展示** (`GuidedResponse.tsx`)
   - AI老师引导式回复展示
   - 美观的卡片样式
   - 时间戳显示

4. **学生主页** (`StudentHome.tsx`)
   - 会话自动创建
   - 消息历史显示
   - 错误处理
   - 加载状态

5. **状态管理** (`sessionStore.ts`)
   - Zustand 状态管理
   - 会话信息存储
   - 消息历史记录

6. **API服务** (`api.ts`)
   - Axios 封装
   - 请求/响应拦截
   - 错误处理

7. **小芽设计风格**
   - 嫩绿色主题 (#8BC34A)
   - 圆润可爱的界面（border-radius: 1.5rem）
   - 一年级学生友好的大按钮
   - 流畅的动画效果

---

## 快速启动

### 方式 1：使用启动脚本（推荐）

```bash
cd frontend
./dev.sh
```

### 方式 2：手动启动

```bash
# 1. 进入前端目录
cd frontend

# 2. 安装依赖（如果还未安装）
npm install

# 3. 启动开发服务器
npm run dev
```

---

## 访问应用

启动成功后，打开浏览器访问：

```
http://localhost:3000
```

---

## 后端API配置

### 开发环境（推荐）

前端已配置 Vite 代理，会自动转发 `/api` 请求到后端：

```javascript
// vite.config.ts
proxy: {
  '/api': {
    target: 'http://localhost:8000',
    changeOrigin: true,
  }
}
```

**确保后端已启动**：

```bash
# 在另一个终端窗口
cd backend
uvicorn app.main:app --reload --port 8000
```

### 生产环境

如需修改后端地址，创建 `.env.local` 文件：

```bash
cd frontend
cp .env.example .env.local

# 编辑 .env.local，设置后端地址
VITE_API_BASE_URL=https://api.sprout-chat.com
```

---

## 核心页面预览

### 1. 加载状态

```
┌─────────────────────────────────────┐
│                                     │
│         [旋转加载动画]               │
│                                     │
│       小芽正在赶来...               │
│                                     │
└─────────────────────────────────────┘
```

### 2. 主界面

```
┌───────────────────────────────────────────────────┐
│  🌱 小芽家教          你的 AI 学习伙伴            │
│  会话 ID: a1b2c3d4...                              │
└───────────────────────────────────────────────────┘

┌───────────────────────────────────────────────────┐
│  🌱 小芽说：                                       │
│  "你好呀！我是小芽老师，很高兴认识你！             │
│   我们今天要一起学习什么呢？"                       │
└───────────────────────────────────────────────────┘

┌─────────────────────┐  ┌─────────────────────┐
│   🎤 语音对话       │  │   📷 拍照上传       │
│                     │  │                     │
│   点击麦克风，       │  │   拍下你的作业，     │
│   对小芽说话         │  │   小芽来帮你         │
│                     │  │                     │
│   [ 128x128 按钮 ]  │  │   [ 128x128 按钮 ]  │
│                     │  │                     │
└─────────────────────┘  └─────────────────────┘

💡 点击麦克风或相机开始学习吧！
```

### 3. 对话历史

```
┌───────────────────────────────────────────────────┐
│  👦 你说：                                         │
│  "我想学习数学加法"                                │
└───────────────────────────────────────────────────┘

┌───────────────────────────────────────────────────┐
│  🌱 小芽说：                                       │
│  "太棒了！加法是个很有趣的题目。                   │
│   你知道 1 + 1 等于多少吗？                        │
│   试着用你的小手指数一数！"                        │
└───────────────────────────────────────────────────┘
```

---

## 交互流程演示

### 场景 1：语音对话

1. **点击麦克风按钮** → 开始录音（红色脉冲动画）
2. **说话**："我想学习数学"
3. **自动停止录音** → 发送到后端
4. **显示识别结果**："你说：我想学习数学"
5. **AI 回复** → 显示引导式教学

### 场景 2：拍照上传

1. **点击相机按钮** → 打开文件选择器
2. **选择图片** → 显示预览
3. **点击"发送给小芽"** → 上传到后端
4. **AI 识别并引导** → 显示教学回复

---

## 技术栈

| 技术 | 版本 | 用途 |
|------|------|------|
| React | 18.2.0 | UI 框架 |
| TypeScript | 5.2.2 | 类型安全 |
| Tailwind CSS | 3.4.0 | 样式系统 |
| Zustand | 4.4.7 | 状态管理 |
| Axios | 1.6.5 | HTTP 客户端 |
| Vite | 5.0.8 | 构建工具 |
| Web Speech API | - | 语音识别 |

---

## 浏览器兼容性

### 必需功能

- ✅ Chrome/Edge（完全支持）
- ⚠️ Safari（语音识别需测试）
- ❌ Firefox（暂不支持 Web Speech API）

### 推荐

使用 **Chrome 浏览器**获得最佳体验。

---

## 故障排查

### 问题 1：后端连接失败

```
Error: Network Error
```

**解决**：
```bash
# 检查后端是否启动
curl http://localhost:8000/api/v1/health

# 或查看后端日志
cd backend
uvicorn app.main:app --reload --port 8000
```

### 问题 2：语音识别不工作

**症状**：点击麦克风无反应

**解决**：
1. 检查浏览器权限（设置 → 隐私和安全 → 麦克风）
2. 使用 Chrome 浏览器
3. 检查控制台错误日志

### 问题 3：样式显示异常

**解决**：
```bash
# 清理缓存并重启
rm -rf node_modules/.vite
npm run dev
```

---

## 开发提示

### 1. 热更新

修改代码后，浏览器会自动刷新，无需手动重启。

### 2. 调试工具

```bash
# 查看所有日志
console.log('[API]', ...)
console.error('[API Error]', ...)
```

### 3. API 调用日志

所有 API 请求都会在控制台显示：

```
[API] POST /v1/conversations/create
[API] POST /v1/conversations/voice
```

---

## 下一步优化

### 短期（1-2天）

- [ ] 添加欢迎动画
- [ ] 优化移动端响应式布局
- [ ] 添加声音反馈（点击音效）
- [ ] 实现文字输入备用方案

### 中期（3-5天）

- [ ] 集成真实 OCR API
- [ ] 添加学习进度可视化
- [ ] 实现多轮对话上下文
- [ ] 添加家长控制面板

### 长期（1-2周）

- [ ] 支持多科目切换
- [ ] 添加学习报告生成
- [ ] 实现离线缓存
- [ ] 优化性能和加载速度

---

## MVP 完成标准

✅ **核心功能**：
- [x] 语音对话界面
- [x] 拍照上传界面
- [x] 引导式教学展示
- [x] 学生体验优化（大按钮、清晰反馈）

✅ **技术质量**：
- [x] TypeScript 类型安全
- [x] 响应式设计
- [x] 错误处理
- [x] 状态管理

✅ **可运行性**：
- [x] 本地开发环境可运行
- [x] 与后端 API 对接
- [x] 浏览器兼容性良好

---

## 技术支持

如有问题，请查看：

1. **开发文档**：`frontend/DEVELOPMENT.md`
2. **测试文档**：`frontend/TESTING.md`
3. **完成报告**：`frontend/COMPLETION_REPORT.md`

---

**立即启动，体验小芽家教！** 🌱
