# ============================================
# 小芽家教 (SproutChat) - 环境变量配置示例
# ============================================
# 说明：复制此文件为 .env 并根据实际环境修改配置

# -----------------------------------------------------------------------------
# 应用基础配置
# -----------------------------------------------------------------------------
APP_NAME=小芽家教
APP_VERSION=0.1.0
ENVIRONMENT=development  # development, staging, production
DEBUG=true

# 服务器配置
HOST=0.0.0.0
PORT=8000

# -----------------------------------------------------------------------------
# 数据库配置
# -----------------------------------------------------------------------------
# 开发环境（SQLite）
DATABASE_URL=sqlite:///./sprout_chat.db

# 生产环境（PostgreSQL）- 取消注释并配置
# DATABASE_URL=postgresql://user:password@localhost:5432/sprout_chat
# DB_HOST=localhost
# DB_PORT=5432
# DB_USER=sprout_user
# DB_PASSWORD=secure_password_change_me
# DB_NAME=sprout_chat

# -----------------------------------------------------------------------------
# CORS 配置
# -----------------------------------------------------------------------------
# JSON 格式的允许来源列表
CORS_ORIGINS=["http://localhost:3000", "http://localhost:5173"]

# 生产环境前端地址
FRONTEND_URL=https://your-frontend-domain.com

# -----------------------------------------------------------------------------
# AI 服务配置
# -----------------------------------------------------------------------------
# AI 提供商: openai 或 anthropic
AI_PROVIDER=openai

# OpenAI 兼容 API（智谱 GLM）
OPENAI_API_KEY=your_api_key_here
OPENAI_BASE_URL=https://open.bigmodel.cn/api/paas/v4/

# Anthropic Claude API
ANTHROPIC_API_KEY=your_anthropic_key_here

# AI 模型配置
AI_MODEL=claude-3-5-sonnet-20241022
AI_VISION_MODEL=glm-4.6v
AI_MAX_TOKENS=1000
AI_TEMPERATURE=0.7
AI_TIMEOUT_SECONDS=30
AI_MAX_RETRIES=3

# -----------------------------------------------------------------------------
# JWT 认证配置
# -----------------------------------------------------------------------------
# 密钥（生产环境必须更改！）
SECRET_KEY=your-secret-key-change-in-production-use-openssl-rand-hex-32
ALGORITHM=HS256
ACCESS_TOKEN_EXPIRE_MINUTES=10080  # 7 天
REFRESH_TOKEN_EXPIRE_DAYS=30

# -----------------------------------------------------------------------------
# 日志配置
# -----------------------------------------------------------------------------
LOG_LEVEL=INFO  # DEBUG, INFO, WARNING, ERROR, CRITICAL
LOG_FILE=logs/sprout_chat.log  # 生产环境建议配置
LOG_ROTATION=true
LOG_MAX_BYTES=10485760  # 10 MB
LOG_BACKUP_COUNT=5

# -----------------------------------------------------------------------------
# 速率限制（生产环境）
# -----------------------------------------------------------------------------
RATE_LIMIT_ENABLED=false
RATE_LIMIT_REQUESTS=100  # 每分钟请求数
RATE_LIMIT_WINDOW=60  # 时间窗口（秒）

# -----------------------------------------------------------------------------
# 安全配置（生产环境）
# -----------------------------------------------------------------------------
ALLOWED_HOSTS=["*"]  # 生产环境应配置具体域名，如 ["api.example.com"]
HTTPS_ONLY=false  # 生产环境建议启用
HSTS_ENABLED=false  # HTTP Strict Transport Security

# -----------------------------------------------------------------------------
# 缓存配置（可选）
# -----------------------------------------------------------------------------
CACHE_ENABLED=false
CACHE_TTL_SECONDS=300  # 5 分钟
REDIS_URL=redis://localhost:6379/0

# -----------------------------------------------------------------------------
# 监控配置（可选）
# -----------------------------------------------------------------------------
# Sentry 错误追踪
SENTRY_DSN=

# 应用性能监控
APM_ENABLED=false

# -----------------------------------------------------------------------------
# 语音配置
# -----------------------------------------------------------------------------
STT_PROVIDER=web_speech  # web_speech, google, azure
TTS_PROVIDER=web_speech  # web_speech, google, azure

# -----------------------------------------------------------------------------
# 会话管理
# -----------------------------------------------------------------------------
SESSION_TIMEOUT_MINUTES=30
MAX_CONVERSATION_HISTORY=10
